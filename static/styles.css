/* ===== McMath Woods – Controls, Layout, Motion (Brand-aligned) ===== */

/* Brand tokens and fluid scale */
:root{
  /* Palette */
  --ink:#0B0F16;        /* deep ink */
  --ink2:#0F1520;       /* charcoal */
  --slate:#94A3B8;      /* neutral text aid */
  --inkText:#F2EBE3;    /* on-dark text */
  --muted:#B6C2D4;      /* secondary text */
  --copper:#D6A173;     /* brand accent */

  /* Accents derived from copper for subtle gradients */
  --accent:  rgba(197,138,89,.90);
  --accent2: rgba(197,138,89,.70);
  --accent3: rgba(197,138,89,.25);

  /* Status hues (kept subtle, on-brand) */
  --rose:#B46868;   /* overdue */
  --amber:#C9A56A;  /* today */
  --orange:#BE8D5E; /* soon */
  --emerald:#7EC09D;/* live dot */

  /* Fluid sizing: 1080p → 4K */
  --fs-rows:  clamp(12px, 0.95vw, 16px);
  --fs-head:  clamp(14px, 1.1vw, 20px);
  --fs-brand: clamp(16px, 1.2vw, 22px);

  --row-h: clamp(28px, 3.2vh, 36px);
  --pad-x: clamp(8px, 1vw, 14px);
  --pad-y: clamp(3px, 0.6vh, 6px);

  --wrap-w: min(96vw, 1920px);
  --list-columns: minmax(180px, 1.1fr) minmax(280px, 2.2fr) minmax(160px, 1.1fr) minmax(160px, 1.1fr) minmax(160px, 1.1fr) minmax(320px, 2.6fr) minmax(180px, 1fr) minmax(220px, 1.2fr);
}

body.page-tv{
  --fs-rows:  clamp(16px, 1.18vw, 22px);
  --fs-head:  clamp(18px, 1.45vw, 26px);
  --fs-brand: clamp(18px, 1.6vw, 28px);
  --row-h: clamp(40px, 4.4vh, 54px);
  --pad-x: clamp(12px, 1.2vw, 18px);
  --pad-y: clamp(6px, 0.9vh, 12px);
  --wrap-w: min(94vw, 2000px);
}

html,body{height:100%}
body{
  margin:0;
  color:var(--inkText);
  background:
    radial-gradient(circle at top right, rgba(214,161,115,.18), transparent 42%),
    linear-gradient(180deg,var(--ink),var(--ink2));
  font-family: var(--font-body, Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif);
  font-variant-numeric:tabular-nums;
  overflow:hidden;
}
body.page-manage{overflow:auto; min-height:100vh;}
a{color:inherit}

.wrap{ width: var(--wrap-w); margin: 12px auto; }
.page-tv .wrap{ display:flex; flex-direction:column; gap:24px; margin:20px auto 32px; }
.tv-layout{gap:32px;}
.tv-insights .insight-card{min-height:140px; padding:24px 26px; gap:10px;}
.tv-insights .metric-value{font-size:clamp(2.6rem, 3vw, 3.6rem);}
.tv-insights .metric-label{font-size:.9rem; letter-spacing:.16em;}
.tv-insights .metric-hint{font-size:.95rem; color:rgba(214,226,240,.78);}

/* Header: copper rule with subtle vignette */
.header{
  height:64px; display:flex; align-items:center; gap:18px; padding:0 32px;
  border-bottom:1px solid rgba(255,255,255,.08);
  background:
    linear-gradient(180deg, rgba(0,0,0,.00), rgba(0,0,0,.18)),
    linear-gradient(90deg, var(--accent), var(--accent2));
  color:#fff;
}
.header-tv{height:auto; padding:22px 40px; justify-content:flex-start; gap:28px;}
.header-tv .header-logo{height:40px; width:auto; flex:none; opacity:.95; filter:drop-shadow(0 3px 10px rgba(0,0,0,.45));}
.brand-block{display:flex; flex-direction:column; gap:6px; min-width:0;}
.brand-sub{font-size:.85rem; letter-spacing:.24em; text-transform:uppercase; color:rgba(248,236,222,.72);}
.header-tv .live{margin-left:auto; display:flex; align-items:center; gap:16px; background:rgba(12,18,28,.6); padding:10px 20px; border-radius:999px; border:1px solid rgba(255,255,255,.16); box-shadow:0 10px 28px rgba(0,0,0,.32); text-transform:uppercase; font-weight:600; letter-spacing:.16em;}
.header-tv .live .date{color:rgba(214,226,240,.85); font-size:.9rem; text-transform:uppercase;}
.header-tv .live .live-label{font-size:.85rem; letter-spacing:.24em; color:rgba(248,236,222,.86);}
.header-tv #clock{font-size:clamp(22px, 1.6vw, 32px); font-weight:600; letter-spacing:.12em; color:#fff;}
.header-tv .dot{width:12px; height:12px; box-shadow:0 0 0 4px rgba(16,24,36,.65);}
.brand{
  font-family: var(--font-display, "Argent CF", ui-serif, Georgia, "Times New Roman", serif);
  font-size: var(--fs-brand); letter-spacing:.12em; font-weight:600; color:#F9D7B0;
}
.live{display:flex; align-items:center; gap:12px; margin-left:auto}
.dot{width:10px;height:10px;border-radius:9999px;background:var(--emerald); box-shadow:0 0 0 2px rgba(255,255,255,.08);}
.small{color:var(--slate); font-size:.9rem}

/* Buttons and inputs */
button, input[type="button"]{
  background:linear-gradient(90deg, var(--accent), var(--accent2));
  color:#fff; border:none; border-radius:8px; padding:8px 18px; font-size:1rem; font-weight:500;
  box-shadow:0 2px 8px rgba(197,138,89,.10);
  cursor:pointer; transition:background .18s, box-shadow .18s, filter .18s;
}
button:hover, input[type="button"]:hover{
  background:linear-gradient(90deg, var(--accent2), var(--accent));
  box-shadow:0 4px 16px rgba(197,138,89,.18);
  filter: brightness(1.03);
}

input, select, textarea{
  background:rgba(36,41,54,.18); color:var(--inkText);
  border:1px solid rgba(255,255,255,.14);
  border-radius:7px; padding:7px 10px; font-size:1rem; margin-bottom:6px;
  transition:border .18s, box-shadow .18s;
}
input:focus, select:focus, textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 2px var(--accent3);
  outline:none;
}

/* Cards */
.card{
  background:linear-gradient(180deg,rgba(44,51,65,.94),rgba(18,22,30,.84));
  border:1px solid rgba(255,255,255,.10); border-radius:18px;
  box-shadow:0 4px 32px 0 rgba(0,0,0,.20), inset 0 1px 0 rgba(255,255,255,.06);
  transition:box-shadow .2s, transform .2s;
}
.card:hover{ box-shadow:0 8px 48px 0 rgba(0,0,0,.28); transform: translateY(-1px); }
.card-header{display:flex; align-items:flex-start; justify-content:space-between; gap:18px; padding:26px 32px 18px;}
.card-header h2{margin:0; font-size:1.4rem; letter-spacing:.16em; text-transform:uppercase; color:#FFEBD6;}
.card-header .small{margin:6px 0 0; font-size:.9rem; letter-spacing:.12em; text-transform:uppercase;}
.card-header .muted{color:rgba(214,226,240,.75);}
.card-header .count{font-size:1rem; letter-spacing:.16em; text-transform:uppercase; color:rgba(214,226,240,.85); align-self:flex-end;}

/* Table primitives */
.table{display:flex; flex-direction:column}
.thead, .trow{display:grid; grid-template-columns:var(--list-columns); align-items:center; gap:0;}
.thead{
  font-size:calc(var(--fs-head) - 2px); color:#f1f4ff;
  border-bottom:1px solid rgba(255,255,255,.06);
  position:relative;
  background-image: linear-gradient(90deg, rgba(197,138,89,.25), rgba(197,138,89,0), rgba(197,138,89,.25));
  background-size: 200% 1px; background-repeat: no-repeat; background-position: 0 100%;
  animation: sweep 22s linear infinite;
}
@keyframes sweep{ 0%{background-position:0 100%} 100%{background-position:200% 100%} }

.cell{padding: var(--pad-y) var(--pad-x); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.trow{
  min-height: var(--row-h);
  font-size: var(--fs-rows);
  position:relative;
  background-image: linear-gradient(180deg, rgba(255,255,255,.018), rgba(0,0,0,0));
}
.trow + .trow{box-shadow:inset 0 1px 0 rgba(255,255,255,.04)}

.page-tv .tv-row{
  display:grid;
  grid-template-columns:var(--list-columns);
  align-items:flex-start;
  gap:0;
  padding:18px var(--pad-x);
  background:linear-gradient(180deg, rgba(17,24,38,.82), rgba(13,17,24,.72));
  transition:background .18s ease, transform .18s ease, box-shadow .18s ease;
}
.page-tv .tv-row:nth-of-type(odd){background:linear-gradient(180deg, rgba(21,28,42,.88), rgba(11,15,22,.75));}
.page-tv .tv-row:hover{background:linear-gradient(180deg, rgba(30,40,60,.94), rgba(13,17,25,.78)); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);}
.page-tv .tv-row .cell{display:flex; flex-direction:column; gap:6px; min-width:0;}
.page-tv .tv-row .client-line{display:flex; align-items:center; gap:10px;}
.page-tv .tv-row .client-name{font-weight:600; letter-spacing:.1em; color:#FFE9D1;}
.page-tv .tv-row .client-meta{display:flex; align-items:center; gap:10px; font-size:.85rem; color:rgba(214,226,240,.75);}
.page-tv .tv-row .priority-flag{flex:none; width:30px; height:30px;}
.page-tv .tv-row .client-meta .micro{font-size:.8rem; letter-spacing:.12em; text-transform:uppercase;}
.page-tv .tv-row .col-case-name{white-space:normal; line-height:1.3; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; text-transform:none; font-weight:600; color:#FCEBD3;}
.page-tv .tv-row .col-type,
.page-tv .tv-row .col-stage{color:rgba(226,232,240,.88); font-weight:500;}
.page-tv .tv-row .col-status{display:flex; align-items:center;}
.page-tv .tv-row .col-focus{white-space:normal; line-height:1.2; color:#E4EEF9;}
.page-tv .tv-row .col-focus .focus-text{display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; text-overflow:ellipsis;}
.page-tv .tv-row .col-para{font-weight:600; color:#D6E8FF;}
.page-tv .tv-row .col-due{text-align:right;}
.page-tv .tv-row.needs .client-line::after{content:"!"; font-size:.9rem; margin-left:6px; color:#FFB74D; font-weight:700;}

.muted{color:var(--muted);}
.micro{font-size:.75rem; letter-spacing:.02em;}

.manage-layout{display:flex; flex-direction:column; gap:24px; min-height:calc(100vh - 64px - 48px); padding-bottom:32px;}
.toolbar{display:flex; justify-content:space-between; align-items:flex-end; gap:18px; padding:18px 24px;}
.toolbar-left{display:flex; flex-wrap:wrap; gap:18px; align-items:flex-end;}
.toolbar-left > div{min-width:180px; display:flex; flex-direction:column; gap:6px;}
.toolbar-right{display:flex; flex-direction:column; gap:10px; align-items:flex-end;}
.toolbar-actions{display:flex; gap:12px; align-items:center;}
.import-feedback{min-height:1.6rem; font-size:.85rem; color:var(--muted); text-align:right; padding:6px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); box-shadow:inset 0 1px 0 rgba(255,255,255,.06); transition:color .2s ease, border-color .2s ease, background .2s ease;}
.import-feedback:empty{display:none;}
.import-feedback[data-tone="success"]{color:var(--emerald); border-color:rgba(126,192,157,.35); background:rgba(126,192,157,.10);}
.import-feedback[data-tone="warn"]{color:var(--amber); border-color:rgba(201,165,106,.35); background:rgba(201,165,106,.10);}
.import-feedback[data-tone="error"]{color:var(--rose); border-color:rgba(180,104,104,.35); background:rgba(180,104,104,.10);}
.page-manage .toolbar .small{color:rgba(233,238,247,.82); letter-spacing:.08em; text-transform:uppercase; font-size:.72rem;}
.page-manage select, .page-manage input{background:rgba(21,25,34,.45);}
.insights-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:18px; padding:0 6px;}
.insight-card{position:relative; display:flex; flex-direction:column; gap:6px; padding:20px 22px; border-radius:18px; background:linear-gradient(180deg,rgba(46,54,70,.88),rgba(22,26,34,.82)); border:1px solid rgba(255,255,255,.08); box-shadow:0 10px 30px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.04); text-align:left; transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease; color:inherit;}
.insight-card .metric-label{font-size:.8rem; letter-spacing:.08em; text-transform:uppercase; color:rgba(248,236,222,.78);}
.insight-card .metric-value{font-size:2rem; font-weight:600; letter-spacing:.04em; color:#FFE5C7;}
.insight-card .metric-hint{font-size:.85rem; color:var(--muted);}
.insight-card::after{content:""; position:absolute; inset:0; border-radius:18px; background:linear-gradient(135deg, rgba(214,161,115,.12), rgba(214,161,115,0)); opacity:0; transition:opacity .2s ease; pointer-events:none;}
.insight-card:hover{transform:translateY(-2px); box-shadow:0 14px 44px rgba(0,0,0,.28);}
.insight-card.actionable{cursor:pointer; border:1px solid rgba(214,161,115,.28); background:linear-gradient(180deg,rgba(44,53,68,.92),rgba(26,32,44,.82)); appearance:none; -webkit-appearance:none; font:inherit; color:inherit; text-align:left;}
.insight-card.actionable:hover::after{opacity:1;}
.insight-card.actionable:focus-visible{outline:2px solid var(--accent3); outline-offset:4px;}
.insight-card.active{border-color:rgba(214,161,115,.6); box-shadow:0 16px 48px rgba(197,138,89,.28);}
.insight-card.active::after{opacity:1;}
.metric-spark{height:36px;}
.insight-card.accent-overdue{border-color:rgba(180,104,104,.45); background:linear-gradient(180deg,rgba(78,30,36,.9),rgba(32,14,18,.85));}
.insight-card.accent-today{border-color:rgba(219,180,92,.45); background:linear-gradient(180deg,rgba(82,56,18,.88),rgba(32,22,12,.84));}
.insight-card.accent-week{border-color:rgba(214,161,115,.45); background:linear-gradient(180deg,rgba(74,48,26,.88),rgba(26,18,12,.84));}
.insight-card.accent-total{border-color:rgba(130,164,220,.45); background:linear-gradient(180deg,rgba(30,46,70,.88),rgba(16,22,32,.84));}
.page-manage .board-grid{gap:24px;}
.board-grid{display:flex; flex-direction:column; gap:18px; flex:1; min-height:0;}
.page-tv .board-grid{display:grid; grid-template-columns:minmax(0,2.3fr) minmax(0,1.1fr); gap:24px; align-items:start;}
.page-tv .board-grid > .card{height:100%;}
.tv-list{position:relative; display:flex; flex-direction:column; --veil-top:136px; --group-offset:0;}
.tv-list .card-header{padding-bottom:14px;}
.tv-list .table{flex:1; display:flex; flex-direction:column;}
.tv-scroll{flex:1; overflow:auto; padding:0;}
.tv-scroll::-webkit-scrollbar{width:12px;}
.tv-scroll::-webkit-scrollbar-thumb{background:rgba(148,163,184,.38); border-radius:999px;}
.list-card{display:flex; flex-direction:column; overflow:hidden; min-height:260px; background:linear-gradient(180deg,rgba(50,58,73,.95),rgba(24,29,39,.88)); flex:1 1 0;}
.list-body{flex:1; overflow:auto; display:flex; flex-direction:column; padding:4px 0;}
#rows{display:flex; flex-direction:column; width:100%;}
.case-row{border:none; background:none; color:inherit; padding:0; width:100%; text-align:left; cursor:pointer; transition:background .18s, box-shadow .18s; display:grid; grid-template-columns:var(--list-columns);}
.case-row:hover{background:rgba(255,255,255,.04);}
.case-row:focus-visible{outline:2px solid var(--accent3); outline-offset:2px;}
.case-row.active{box-shadow:inset 0 0 0 2px rgba(197,138,89,.25); background:rgba(197,138,89,.06);}
.case-row .cell{display:flex; flex-direction:column; gap:4px; min-width:0; align-items:flex-start;}
.case-row .cell strong{color:#F9D7B0; font-weight:600;}
.case-row .cell .muted{font-size:.85rem; color:rgba(214,161,115,.78);}
.case-row .col-focus .focus-text{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  line-height:1.25;
  max-height:2.6em;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:normal;
}
.case-row .col-client{white-space:normal; font-weight:600; color:#FFE9D1;}
.case-row .col-case-name{white-space:normal; color:rgba(214,161,115,.82); font-size:.95rem;}
.empty-state{padding:32px 24px; text-align:center; color:var(--muted);}
.tv-empty{padding:60px 32px; font-size:1.1rem; letter-spacing:.08em; text-transform:uppercase; background:rgba(12,18,28,.72); border:1px solid rgba(255,255,255,.08); border-radius:16px; margin:24px;}

.details-card{display:flex; flex-direction:column; gap:18px; padding:24px; overflow:auto; background:linear-gradient(180deg,rgba(46,54,69,.92),rgba(25,30,40,.82)); min-height:320px; flex:1 1 0;}
.details-header{display:flex; gap:18px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;}
.attention-group{display:flex; gap:8px; flex-wrap:wrap;}
.chip{background:rgba(197,138,89,.16); color:var(--inkText); border:1px solid rgba(197,138,89,.35); border-radius:999px; padding:6px 14px; font-size:.85rem; letter-spacing:.02em; cursor:pointer; transition:background .2s, border .2s;}
.chip:hover{background:rgba(197,138,89,.28);}
.chip.active{background:var(--accent); border-color:rgba(197,138,89,.65);}
.chip:disabled{opacity:.4; cursor:not-allowed;}

.header-actions{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
.header-actions .ghost{min-width:0;}

.details-overview{display:flex; flex-direction:column; gap:12px;}
.details-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:12px 18px;}
.detail-pair{display:flex; flex-direction:column; gap:6px; padding:12px 14px; border-radius:12px; background:rgba(22,26,34,.72); box-shadow:inset 0 1px 0 rgba(255,255,255,.04);} 
.detail-label{font-size:.8rem; letter-spacing:.08em; text-transform:uppercase; color:var(--muted);}
.detail-value{font-size:1.05rem; font-weight:500; color:#FADABA;}

.current-focus-text{margin:0; padding:16px 18px; border-radius:12px; background:linear-gradient(135deg, rgba(214,161,115,.16), rgba(214,161,115,.04)); color:#FFEBD6; line-height:1.5;}
.focus-entry input{width:100%;}
.focus-entry-controls{display:flex;align-items:center;gap:8px;margin-bottom:8px;}
.focus-entry-controls label{margin:0;}
.focus-entry-controls select{min-width:120px;}
.focus-entry::after{content:"Press Enter to save"; display:block; font-size:.8rem; color:var(--muted); margin-top:6px;}

.details-section{display:flex; flex-direction:column; gap:12px;}
.focus-list{list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px;}
.focus-list li{display:grid; grid-template-columns:auto auto 1fr; gap:10px; align-items:center; padding:8px 0; border-bottom:1px solid rgba(255,255,255,.06);}
.focus-time{font-size:.75rem; color:var(--muted);}
.focus-author{font-weight:600; font-size:.85rem; color:#F9D7B0;}
.focus-text{font-size:.95rem; color:#F4ECE1;}
.deadline-list{display:flex; flex-direction:column; gap:8px;}
.deadline-row{display:grid; grid-template-columns:minmax(140px,0.8fr) minmax(200px,1fr) auto auto; gap:10px; align-items:center; padding:6px 0;}
.deadline-row .checkbox{display:flex; align-items:center; gap:6px;}
.deadline-row .icon{width:32px; height:32px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--muted); font-size:1.2rem; line-height:1; display:flex; align-items:center; justify-content:center; cursor:pointer;}
.deadline-row .icon:hover{background:rgba(255,255,255,.12); color:#fff;}

.button, .toolbar a.button{display:inline-flex; align-items:center; justify-content:center; background:linear-gradient(90deg, var(--accent), var(--accent2)); color:#fff; padding:8px 18px; border-radius:8px; text-decoration:none; font-weight:500; box-shadow:0 2px 8px rgba(197,138,89,.12); transition:background .18s, box-shadow .18s;}
.button:hover, .toolbar a.button:hover{background:linear-gradient(90deg, var(--accent2), var(--accent)); box-shadow:0 4px 16px rgba(197,138,89,.2);}

.ghost{background:transparent; border:1px solid rgba(255,255,255,.18); color:var(--inkText); box-shadow:none;}
.ghost:hover{background:rgba(255,255,255,.08); box-shadow:none;}
.ghost.danger{border-color:rgba(255,111,111,.45); color:#FFC6C6;}
.ghost.danger:hover{background:rgba(255,111,111,.16);}

@media (max-width: 1280px){
  .manage-layout{height:auto; min-height:calc(100vh - 64px - 48px);}
  .list-card{min-height:220px;}
}

/* Adaptive columns */
.col-client{ width: clamp(16ch, 18vw, 26ch); }
.col-case-name{ width: clamp(16ch, 18vw, 26ch); }
.col-type{ width: clamp(12ch, 12vw, 18ch); }
.col-stage{ width: clamp(10ch, 10vw, 14ch); }
.col-status{ width: clamp(10ch, 10vw, 14ch); }
.col-focus{ width: clamp(24ch, 28vw, 42ch); }
.col-para{ width: clamp(10ch, 9vw, 14ch); }
.col-due{ width: clamp(14ch, 14vw, 22ch); text-align:right; }
.col-due .due-inline{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:.25rem;
  width:100%;
  text-align:right;
}
.col-due .due-date{ font-variant-numeric:tabular-nums; }
.col-due .due-relative{ white-space:normal; }

/* Badges */
.badge{
  --badge-bg: rgba(214,161,115,.18);
  --badge-border: rgba(214,161,115,.35);
  --badge-fg: #FFE4C7;
  padding:.2rem .55rem;
  border-radius:6px;
  font-size:.72rem;
  letter-spacing:.05em;
  text-transform:uppercase;
  background:var(--badge-bg);
  border:1px solid var(--badge-border);
  color:var(--badge-fg);
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  line-height:1.1;
}
.badge::before{
  content:"";
  display:inline-block;
  width:6px;
  height:6px;
  border-radius:999px;
  background:currentColor;
  opacity:.7;
}
.badge.none{
  --badge-bg: rgba(148,163,184,.18);
  --badge-border: rgba(148,163,184,.35);
  --badge-fg: #E2E8F0;
}
.badge.pre-filing{
  --badge-bg: rgba(59,130,246,.16);
  --badge-border: rgba(59,130,246,.32);
  --badge-fg: #CFE0FF;
}
.badge.active{
  --badge-bg: rgba(34,197,94,.18);
  --badge-border: rgba(34,197,94,.38);
  --badge-fg: #CFF9DD;
  box-shadow:0 0 0 1px rgba(34,197,94,.18);
}
.badge.filed{
  --badge-bg: rgba(74,222,128,.12);
  --badge-border: rgba(74,222,128,.3);
  --badge-fg: #BAF7CF;
}
.badge.discovery{
  --badge-bg: rgba(249,168,212,.14);
  --badge-border: rgba(249,168,212,.32);
  --badge-fg: #FFE0F1;
}
.badge.open{
  --badge-bg: rgba(148,163,184,.2);
  --badge-border: rgba(148,163,184,.36);
  --badge-fg: #E4ECF8;
}
.badge.settlement{
  --badge-bg: rgba(251,191,36,.16);
  --badge-border: rgba(251,191,36,.35);
  --badge-fg: #FDE6AE;
}
.badge.post-trial{
  --badge-bg: rgba(147,197,253,.14);
  --badge-border: rgba(147,197,253,.32);
  --badge-fg: #E0EEFF;
}
.badge.appeal{
  --badge-bg: rgba(129,140,248,.16);
  --badge-border: rgba(129,140,248,.35);
  --badge-fg: #E0E5FF;
}
.badge.closed{
  --badge-bg: rgba(100,116,139,.18);
  --badge-border: rgba(100,116,139,.38);
  --badge-fg: #CBD5F5;
}

/* Attention accents */
.trow::before{content:""; position:absolute; left:0; top:6px; bottom:6px; width:4px; border-radius:999px; opacity:.85}
.trow.overdue::before{background:linear-gradient(var(--rose), transparent)}
.trow.today::before{background:linear-gradient(var(--amber), transparent)}
.trow.week::before{background:linear-gradient(var(--orange), transparent)}
.trow.next::before{background:linear-gradient(#8FB4FF, transparent)}
.trow.later::before{background:linear-gradient(#6C809D, transparent)}
.trow.nodue::before{background:linear-gradient(rgba(148,163,184,.45), transparent)}
.trow.needs::before{box-shadow:0 0 12px rgba(255,200,140,.45);}
@media (prefers-reduced-motion:no-preference){
  @keyframes slowpulse{0%,100%{box-shadow:0 0 0 0 rgba(180,104,104,.03)}50%{box-shadow:0 0 0 14px rgba(180,104,104,0)}}
  .overdue{animation:slowpulse 8s ease-in-out infinite}
}

/* Filevine link dot */
.fv{width:8px;height:8px;border-radius:9999px;display:inline-block;margin-left:6px;vertical-align:middle}
.fv.on{background:var(--copper); box-shadow:0 0 0 2px rgba(197,138,89,.18)}
.fv.off{background:rgba(148,163,184,.35)}

/* Ambient aurora (very subtle, same-hue) */
@keyframes aurora {
  0%{ transform: translate3d(0,0,0) scale(1); opacity:.30 }
  50%{ transform: translate3d(2%, -2%, 0) scale(1.03); opacity:.44 }
  100%{ transform: translate3d(0,0,0) scale(1); opacity:.30 }
}
body::before{
  content:""; position:fixed; inset:-25% -15% 55% -15%;
  background:
    radial-gradient(1200px 420px at 70% -10%, rgba(197,138,89,.10), rgba(0,0,0,0)),
    radial-gradient(900px 360px at 20% -5%, rgba(120,140,160,.06), rgba(0,0,0,0));
  animation: aurora 18s ease-in-out infinite;
  pointer-events:none; will-change: transform, opacity;
}

/* Film grain */
body::after{
  content:""; position:fixed; inset:0; pointer-events:none; opacity:.05; mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'140\' height=\'140\'><filter id=\'n\'><feTurbulence type=\'fractalNoise\' baseFrequency=\'0.9\' numOctaves=\'2\' stitchTiles=\'stitch\'/></filter><rect width=\'100%\' height=\'100%\' filter=\'url(%23n)\' opacity=\'0.12\'/></svg>");
}

/* Density guard */
body.dense .trow{ height: calc(var(--row-h) - 2px); }
body.dense .cell{ letter-spacing: .01em; }

/* Motion safety and crisp circles */
@media (prefers-reduced-motion: reduce){
  body::before, .thead{ animation: none }
  .overdue{ animation: none }
}
@media (min-resolution: 2dppx){
  .dot, .fv{ transform: translateZ(0); }
}
/* TV-only extras */
#board { position: relative; overflow: hidden; }
#rows { overflow: clip; } /* rows are inside #board; #board scrolls */

.board-card{padding:0; display:flex; flex-direction:column; overflow:hidden; backdrop-filter:blur(6px); --group-offset:56px;}
.board-card .table{flex:1;}
.board-card .thead{position:sticky; top:0; z-index:2; background:linear-gradient(180deg, rgba(24,30,42,.94), rgba(24,30,42,.78)); box-shadow:0 4px 18px rgba(0,0,0,.45);}
.board-card .thead .cell{padding:12px var(--pad-x); letter-spacing:.14em; text-transform:uppercase; font-weight:600;}

.group-row{display:flex; align-items:center; justify-content:space-between; padding:14px var(--pad-x); text-transform:uppercase; letter-spacing:.14em; font-size:calc(var(--fs-head) - 6px); font-weight:700; color:rgba(248,248,255,.72); background:rgba(12,18,28,.82); box-shadow:inset 0 -1px 0 rgba(255,255,255,.06); position:sticky; top:var(--group-offset, 0); z-index:1; backdrop-filter:blur(6px);}
.group-row .group-count{font-size:.75em; color:rgba(226,232,240,.75); letter-spacing:.1em;}
.group-row.overdue{color:#FFD6D6; background:rgba(79,22,30,.82);}
.group-row.today{color:#FFE6B5; background:rgba(78,54,20,.78);}
.group-row.week{color:#FFE1C7; background:rgba(72,48,26,.78);}
.group-row.next{color:#D8E8FF; background:rgba(26,46,78,.78);}
.group-row.later{color:#C8D6EA; background:rgba(24,32,46,.78);}
.group-row.nodue{color:#BFC9D8; background:rgba(26,32,44,.74);}
.group-row + .trow{box-shadow:none;}

.glance{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:16px;}
.glance-card{position:relative; border-radius:16px; padding:18px 20px; background:linear-gradient(180deg,rgba(42,52,70,.88),rgba(18,24,34,.82)); border:1px solid rgba(255,255,255,.08); box-shadow:0 12px 32px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:6px; text-transform:uppercase; letter-spacing:.14em; min-height:120px;}
.glance-card::after{content:""; position:absolute; inset:0; border-radius:inherit; opacity:.18; background:linear-gradient(135deg, rgba(214,161,115,.45), rgba(214,161,115,0)); pointer-events:none;}
.glance-card.overdue{border-color:rgba(180,104,104,.5); background:linear-gradient(180deg,rgba(78,30,36,.9),rgba(32,14,18,.85));}
.glance-card.today{border-color:rgba(219,180,92,.5); background:linear-gradient(180deg,rgba(82,56,18,.88),rgba(32,22,12,.84));}
.glance-card.soon{border-color:rgba(214,161,115,.45); background:linear-gradient(180deg,rgba(74,48,26,.88),rgba(26,18,12,.84));}
.glance-card.total{border-color:rgba(130,164,220,.45); background:linear-gradient(180deg,rgba(30,46,70,.88),rgba(16,22,32,.84));}
.glance-label{font-size:.8rem; color:rgba(240,244,255,.78);}
.glance-value{font-size:clamp(28px,2.8vw,48px); font-weight:700; color:#fff; letter-spacing:.08em;}
.glance-hint{font-size:.75rem; letter-spacing:.08em; color:rgba(220,230,244,.78);}

.priority-panel{display:flex; flex-direction:column; gap:12px; background:linear-gradient(180deg,rgba(40,48,64,.78),rgba(20,26,38,.74)); border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:18px 22px; box-shadow:0 8px 32px rgba(0,0,0,.28);}
.priority-header{display:flex; align-items:center; justify-content:space-between; gap:12px;}
.priority-title{margin:0; font-size:clamp(18px, 1.3vw, 26px); letter-spacing:.14em; text-transform:uppercase; color:#FFE6C6;}
.priority-subtitle{font-size:.85rem; letter-spacing:.1em; text-transform:uppercase; color:rgba(226,232,240,.65);}
.priority-list{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px;}
.priority-card{display:flex; flex-direction:column; gap:0;}
.priority-card .card-header{padding-bottom:12px;}
.priority-card .priority-list{flex:1; display:flex; flex-direction:column; gap:16px; padding:0 32px 28px; overflow:auto;}
.priority-card .priority-list::-webkit-scrollbar{width:10px;}
.priority-card .priority-list::-webkit-scrollbar-thumb{background:rgba(148,163,184,.32); border-radius:999px;}
.priority-card .priority-name{font-size:1.2rem; letter-spacing:.08em;}
.priority-card .priority-meta{font-size:.95rem; letter-spacing:.04em; text-transform:none; justify-content:space-between;}
.priority-card .priority-due{color:rgba(240,244,255,.82);}
.priority-card .priority-item{width:100%;}
.priority-card .priority-empty{margin:0;}
.priority-item{background:rgba(12,18,28,.72); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px 16px; display:flex; flex-direction:column; gap:10px; min-height:100px; box-shadow:0 6px 18px rgba(0,0,0,.28); transition:transform .2s ease, box-shadow .2s ease;}
.priority-item:hover{transform:translateY(-2px); box-shadow:0 12px 32px rgba(0,0,0,.32);}
.priority-item.overdue{border-color:rgba(180,104,104,.45); background:rgba(70,24,32,.72);}
.priority-item.today{border-color:rgba(219,180,92,.45); background:rgba(64,46,20,.72);}
.priority-item.week{border-color:rgba(214,161,115,.45); background:rgba(58,36,24,.72);}
.priority-item.next{border-color:rgba(130,164,220,.45); background:rgba(30,46,70,.72);}
.priority-item.later{border-color:rgba(120,140,160,.35);}
.priority-top{display:flex; align-items:center; gap:10px; font-weight:600; color:#FDEACE;}
.priority-name{font-size:1.05rem; letter-spacing:.04em;}
.priority-meta{display:flex; justify-content:space-between; align-items:center; gap:10px; font-size:.85rem; color:rgba(224,232,240,.82); text-transform:uppercase; letter-spacing:.08em; flex-wrap:wrap;}
.priority-owner{color:#D6E8FF; font-weight:600;}
.priority-empty{padding:18px; border-radius:12px; background:rgba(18,24,36,.72); text-align:center; font-size:.9rem; letter-spacing:.06em; color:rgba(214,226,240,.75);}

.priority-flag{display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:999px; font-size:1rem; background:rgba(255,255,255,.12); box-shadow:0 0 0 1px rgba(255,255,255,.08);}
.priority-flag.overdue{background:rgba(180,104,104,.28);}
.priority-flag.today{background:rgba(219,180,92,.28);}
.priority-flag.week{background:rgba(214,161,115,.28);}
.priority-flag.next{background:rgba(130,164,220,.28);}
.priority-flag.later{background:rgba(120,140,160,.2);}

.due-pill{display:inline-flex; flex-direction:column; align-items:flex-end; gap:4px; padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); text-transform:uppercase; letter-spacing:.12em; font-size:.7rem; font-weight:700; min-width:150px; background:rgba(16,24,36,.6);}
.due-pill strong{font-size:.9rem; color:#fff; letter-spacing:.16em;}
.due-pill span{font-size:.7rem; color:rgba(214,226,240,.75);}
.due-pill.overdue{background:rgba(79,22,30,.82); border-color:rgba(180,104,104,.6);}
.due-pill.today{background:rgba(78,54,20,.78); border-color:rgba(219,180,92,.6);}
.due-pill.week{background:rgba(74,48,26,.78); border-color:rgba(214,161,115,.58);}
.due-pill.next{background:rgba(30,46,70,.78); border-color:rgba(130,164,220,.5);}
.due-pill.later{background:rgba(24,32,46,.78); border-color:rgba(120,140,160,.45);}
.due-pill.nodue{background:rgba(18,24,34,.78); border-color:rgba(148,163,184,.35);}
.priority-item .priority-due{color:rgba(240,244,255,.78);}

.scroll-veil {
  position: absolute; left: 0; right: 0; height: 40px; pointer-events: none; z-index: 2;
  background: linear-gradient(180deg, rgba(15,21,32,.65), rgba(15,21,32,0));
}
.scroll-veil.top { top: 0; }
.scroll-veil.bottom {
  bottom: 0;
  transform: rotate(180deg);
}

.page-tv .scroll-veil{height:40px;}
.page-tv .scroll-veil.top{top:var(--veil-top, 0);}
.page-tv .scroll-veil.bottom{height:40px;}

/* Tighten row density on TV a bit more while preserving legibility */
body.dense .trow { height: calc(var(--row-h) - 4px); }
 /* --- TV table sizing overrides --- */
.table, .thead, .trow { width:100% }
.thead .cell, .trow .cell { flex:0 0 auto }

.col-client{ flex:0 0 16ch }
.col-case-name  { flex:1 1 32ch; min-width:28ch }
.col-type  { flex:0 0 16ch }
.col-stage { flex:0 0 14ch }
.col-status{ flex:0 0 14ch }
.col-focus { flex:2 1 48ch; min-width:34ch }
.col-para  { flex:0 0 16ch }
.col-due   { flex:0 0 16ch; text-align:right }

.cell{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
